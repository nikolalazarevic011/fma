(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(7644)}])},7644:function(e,t,s){"use strict";s.r(t);var a=s(5893),l=s(7294),n=s(1163);t.default=()=>{let[e,t]=(0,l.useState)(""),[s,r]=(0,l.useState)(""),[o,i]=(0,l.useState)(null),m=(0,n.useRouter)(),handleSubmit=async t=>{t.preventDefault(),i(null);let a=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:e,password:s})}),l=await a.json();if(a.ok){if(localStorage.setItem("user",JSON.stringify(l.user)),l.user.membership_levels&&l.user.membership_levels.length>0){let e=l.user.membership_levels[0].id;localStorage.setItem("membershipId",e)}let e=Math.random().toString(36).substr(2);localStorage.setItem("authToken",e),window.dispatchEvent(new Event("login-status-change")),m.push("/")}else i(l.message)};return(0,a.jsx)("div",{className:"flex min-h-[90vh] items-center justify-center bg-gray-100",children:(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"w-11/12 max-w-xl px-8 pt-4 pb-8 mb-4 bg-white rounded shadow-md",children:[(0,a.jsx)("h1",{className:"mb-6 text-2xl font-bold text-center text-primary",children:"FMA Member's Login"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"login",className:"block mb-2 text-sm font-bold text-gray-700",children:"Username or Email"}),(0,a.jsx)("input",{type:"text",id:"login",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 leading-tight text-gray-700 bg-blue-100 border rounded shadow appearance-none focus:shadow-outline focus:outline-none"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block mb-2 text-sm font-bold text-gray-700",children:"Password"}),(0,a.jsx)("input",{type:"password",id:"password",value:s,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 leading-tight text-gray-700 bg-blue-100 border rounded shadow appearance-none focus:shadow-outline focus:outline-none"})]}),(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)("input",{type:"checkbox",id:"remember",className:"mr-2 leading-tight"}),(0,a.jsx)("label",{htmlFor:"remember",className:"text-sm text-gray-700",children:"Keep me logged in"})]}),o&&(0,a.jsx)("p",{className:"mb-4 text-xs italic text-red-500",children:o}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 font-bold text-white rounded bg- focus:shadow-outline bg-primary focus:outline-none",children:"Log In"})}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("a",{href:"#",className:"text-sm text-blue-600 hover:underline",children:"Lost your Password?"})})]})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);